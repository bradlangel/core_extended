OASISFormat:      0.3
OCamlVersion:     >= 4.00.0
FindlibVersion:   >= 1.3.2
Name:             core_extended
Version:          112.35.00
Synopsis:         Jane Street Capital's standard library overlay
Authors:          Jane Street Group, LLC <opensource@janestreet.com>
Copyrights:       (C) 2008-2013 Jane Street Group LLC <opensource@janestreet.com>
Maintainers:      Jane Street Group, LLC <opensource@janestreet.com>
License:          Apache-2.0
LicenseFile:      LICENSE.txt
Homepage:         https://github.com/janestreet/core_extended
Plugins:          StdFiles (0.3), DevFiles (0.3), META (0.3)
XStdFilesAUTHORS: false
XStdFilesREADME:  false
BuildTools:       ocamlbuild, camlp4o
Description:
  The Core suite of libraries is an industrial strength alternative to
  OCaml's standard library that was developed by Jane Street, the
  largest industrial user of OCaml.

Flag linux
  Description: Enable linux specific extensions
  Default$:    flag(linux_possible)

Flag "posix-timers"
  Description: Enable POSIX timers
  Default$:    flag(posix_timers_possible)

PreConfCommand:  config/detect.sh
PostConfCommand: config/discover.sh $ocamlc src/config.mlh src/config.h

PreDistCleanCommand: $rm src/config.mlh src/config.h

Library core_extended
  Path:               src
  FindlibName:        core_extended
  Pack:               true
  Modules:            Alternating_primary_backup_assignment,
                      Atomic_edit,
                      Bin_io_utils,
                      Bitarray,
                      Cache,
                      Cbuffer,
                      Color_print,
                      Crit_bit,
                      Csv_writer,
                      Deprecated_bench,
                      Deprecated_command,
                      Deprecated_fcommand,
                      Deprecated_service_command,
                      Documented_match_statement,
                      English,
                      Environment,
                      Exception_check,
                      Extended_array,
                      Extended_common,
                      Extended_exn,
                      Extended_filename,
                      Extended_float,
                      Extended_gc,
                      Extended_hashtbl,
                      Extended_int,
                      Extended_int32,
                      Extended_int63,
                      Extended_int64,
                      Extended_linux,
                      Extended_list,
                      Extended_list__LCS,
                      Extended_list__multimerge,
                      Extended_memo,
                      Extended_monad,
                      Extended_nativeint,
                      Extended_option,
                      Extended_result,
                      Extended_sexp,
                      Extended_string,
                      Extended_sys,
                      Extended_thread,
                      Extended_time,
                      Extended_unix,
                      Extra_fields,
                      Fd_leak_check,
                      Find,
                      Flang,
                      Float_ref,
                      Fold_map,
                      Generic,
                      Hashtbl2,
                      Hashtbl2_pair,
                      Interval_map,
                      Interval_map_intf,
                      Invariant,
                      Invocation,
                      Iter,
                      Lazy_list,
                      Lazy_m,
                      Lazy_sequence,
                      Left_boundary,
                      Linebuf,
                      List_zipper,
                      Logger,
                      Low_level_debug,
                      Malloc,
                      Multi_map,
                      Net_utils,
                      Number,
                      Olang,
                      Packed_array,
                      Packed_map,
                      Posix_clock,
                      Pp,
                      Printc,
                      Process,
                      Procfs,
                      Prod_or_test,
                      Quickcheck_deprecated,
                      Random_selection,
                      Readline,
                      Readline__input_char,
                      Readline__input_loop,
                      Runtime_blockout_detector,
                      Rw_mutex,
                      Sampler,
                      Search_foo,
                      Semaphore,
                      Sendmail,
                      Service_command,
                      Set_lang,
                      Set_lang_intf,
                      Shell,
                      Shell__core,
                      Shell__line_buffer,
                      Sntp,
                      Splay_tree,
                      Std,
                      String_zipper,
                      Sys_utils,
                      Tcp,
                      Timed_function,
                      Trie,
                      Unix_utils,
                      Update_queue
  CSources:           extended_int_stubs.c,
                      extended_linux_stubs.c,
                      extended_unix_stubs.c,
                      fork_exec.c,
                      fork_exec.h,
                      linebuf_stubs.c,
                      low_level_debug_stubs.c,
                      malloc_stubs.c,
                      posix_clock_stubs.c,
                      config.h
  CCOpt+:             -Isrc
  BuildDepends:       bigarray,
                      bin_prot,
                      bin_prot.syntax,
                      comparelib.syntax,
                      core,
                      custom_printf,
                      custom_printf.syntax,
                      fieldslib,
                      fieldslib.syntax,
                      core_extended.janecheck,
                      pa_bench.syntax,
                      pa_ounit,
                      pa_ounit.syntax,
                      pa_pipebang,
                      pa_test,
                      pa_test.syntax,
                      textutils,
                      re2,
                      sexplib,
                      sexplib.syntax,
                      sexplib_num,
                      unix,
                      threads
  XMETARequires:      bigarray,
                      bin_prot,
                      core,
                      core_extended.janecheck,
                      custom_printf,
                      fieldslib,
                      oUnit,
                      pa_bench,
                      pa_ounit,
                      pa_test,
                      re2,
                      sexplib,
                      sexplib_num,
                      textutils,
                      threads
                      unix,

Library selector_lib
  Path:          selector/src
  FindlibParent: core_extended
  FindlibName:   selector
  Pack:          true
  Modules:       Selector
  BuildDepends:  bin_prot.syntax,
                 core,
                 re2,
                 sexplib.syntax,
                 threads
  XMETARequires: bin_prot,
                 core,
                 re2,
                 sexplib,
                 threads

Library janecheck
  Path:          janecheck/src
  FindlibParent: core_extended
  FindlibName:   janecheck
  Pack:          true
  Modules:       Generator,
                 Jc,
                 Jc_intf,
                 Observer,
                 Std
  BuildDepends:  comparelib.syntax,
                 core_kernel,
                 core_extended.janecheck_kernel,
                 pa_ounit.syntax,
                 pa_test.syntax,
                 sexplib.syntax,
                 threads
  XMETARequires: comparelib,
                 core_kernel,
                 core_extended.janecheck_kernel,
                 pa_ounit,
                 pa_test,
                 sexplib,
                 threads

Library janecheck_kernel
  Path:          janecheck_kernel/src
  FindlibParent: core_extended
  FindlibName:   janecheck_kernel
  Pack:          true
  Modules:       Generator,
                 Jck,
                 Janecheck_intf,
                 Observer,
                 Std
  BuildDepends:  comparelib.syntax,
                 fieldslib.syntax,
                 pa_ounit.syntax,
                 pa_test.syntax,
                 sexplib.syntax,
                 threads
  XMETARequires: comparelib,
                 fieldslib,
                 pa_ounit,
                 pa_test,
                 sexplib,
                 threads

Executable core_extended_hello
  Path:               test
  MainIs:             core_extended_hello.ml
  Build$:             flag(tests)
  Custom:             true
  CompiledObject:     best
  Install:            false
  BuildDepends:       core_extended

Executable core_hello
  Path:               test
  MainIs:             core_hello.ml
  Build$:             flag(tests)
  Custom:             true
  CompiledObject:     best
  Install:            false
  BuildDepends:       core,threads

Executable test_runner
  Path:               test
  MainIs:             test_runner.ml
  Build$:             flag(tests)
  Custom:             true
  CompiledObject:     best
  Install:            false
  BuildDepends:       core_extended,oUnit (>= 1.1.0),threads

Test test_runner
  Run$:               flag(tests)
  Command:            $test_runner --core-hello $core_hello --core-extended-hello $core_extended_hello
  WorkingDirectory:   test
  TestTools:          core_hello,core_extended_hello
